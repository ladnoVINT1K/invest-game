# GameAPI

`GameAPI` — основной интерфейс для симуляции инвестиционной игры.  
Позволяет управлять капиталом, портфелем инвестиций и взаимодействовать с рыночной моделью.

---

## Конструктор

```cpp
GameAPI(double startCapital, double taxRate);

    startCapital — стартовый капитал игрока.

    taxRate — ставка налога на прибыль.

    Описание: Инициализирует портфель с заданным капиталом и ставкой налога, создаёт рыночную модель MarketModel и устанавливает счётчик месяцев в 0.
```

## Методы получения рыночной информации

### getMarketAssets
```cpp
std::vector<std::map<std::string, double>> getMarketAssets() const;

    Описание: Возвращает текущее состояние всех активов на рынке.

    Возвращает: Вектор словарей с ключами:

        "price" — текущая цена актива.

        "trend" — тренд актива.

        "volatility" — волатильность актива.
```
### getCandles
```cpp
std::vector<Candle> getCandles(const std::string& symbol) const;

    symbol — символ актива (например, "GOLD" или "BOND1").

    Описание: Возвращает историю цен (свечи) для указанного актива.

    Возвращает: Вектор объектов Candle. Если актив не найден — пустой вектор.
```
## Методы работы с портфелем
### getPortfolio
```cpp
std::vector<std::map<std::string, double>> getPortfolio() const;
```
    Описание: Возвращает список всех инвестиций в портфеле.

    Возвращает: Вектор словарей с ключами:

        "amount" — количество единиц актива.

        "profit" — текущая прибыль по активу.

        "rate" — процентная ставка (для депозитов и облигаций).

### getCapital
```cpp
double getCapital() const;
```
    Описание: Возвращает текущий капитал игрока (свободные денежные средства).

### getProfit
```cpp
double getProfit() const;
```
    Описание: Возвращает текущую общую прибыль портфеля (учитывая изменения стоимости всех активов).

## Методы торговли
buy

void buy(const std::string& symbol, double amount);

    symbol — символ актива.

    amount — сумма для инвестирования.

    Описание: Покупает активы по следующей логике:

        Металлы ("GOLD", "SILVER") — создаётся объект Metal. Количество рассчитывается по текущей цене.

        Облигации (BOND*) — создаётся объект Bond номиналом 1000 и ставкой 8% годовых.

        Депозиты (DEP*) — создаётся объект Deposit с процентной ставкой 5% годовых.

    После покупки сумма вычитается из капитала.

sell

void sell(const std::string& symbol, double amount);

    symbol — символ актива.

    amount — количество для продажи.

    Описание: Продаёт актив частично или полностью:

        Если количество для продажи ≥ текущего, актив полностью удаляется.

        Иначе количество уменьшается на указанную сумму, а капитал увеличивается на проданную сумму.

Симуляция времени
nextStep

void nextStep();

    Описание: Переходит к следующему месяцу:

        Обновляет рыночную модель.

        Обновляет все активы портфеля с учётом рыночных изменений.

        Увеличивает счётчик месяцев на 1.

reset

void reset();

    Описание: Сбрасывает состояние игры:

        Обнуляет счётчик месяцев.

        Очищает портфель.

        Пересоздаёт рыночную модель с начальным состоянием.

Пример использования

GameAPI game(10000.0, 0.13);

// Получаем информацию о рынке
auto assets = game.getMarketAssets();

// Покупаем золото
game.buy("GOLD", 2000.0);

// Переходим на следующий месяц
game.nextStep();

// Проверяем капитал и портфель
double capital = game.getCapital();
auto portfolio = game.getPortfolio();